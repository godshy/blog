<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>PKI and encryption explained step by step | Hongyi&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="PKI and data transfer encryption explainedIt is import to understand the concept of data layer encryption and security. Let’s understand how it works from scratch. I will explain this by using differe">
<meta property="og:type" content="article">
<meta property="og:title" content="PKI and encryption explained step by step">
<meta property="og:url" content="https://godshy.github.io/blog/2024/07/18/PKI-and-encryption-explained-step-by-step/index.html">
<meta property="og:site_name" content="Hongyi&#39;s blog">
<meta property="og:description" content="PKI and data transfer encryption explainedIt is import to understand the concept of data layer encryption and security. Let’s understand how it works from scratch. I will explain this by using differe">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://s2.loli.net/2024/07/18/6tMxpNq2OAoFT5a.png">
<meta property="og:image" content="https://s2.loli.net/2024/07/18/FSnuHhs178GkKxe.png">
<meta property="og:image" content="https://s2.loli.net/2024/07/18/mQ7xhypnv9uMS4I.png">
<meta property="og:image" content="https://s2.loli.net/2024/07/18/KvucmGXQnyFtji8.png">
<meta property="og:image" content="https://s2.loli.net/2024/07/18/oITn98uUgYlOft1.png">
<meta property="og:image" content="https://s2.loli.net/2024/07/18/kdZbijFreGV7BgI.png">
<meta property="og:image" content="https://s2.loli.net/2024/07/18/EHZzMIxsUWX6tuL.png">
<meta property="og:image" content="https://s2.loli.net/2024/07/18/cKhp8g7CRjeBrLA.png">
<meta property="og:image" content="https://s2.loli.net/2024/07/18/wnUILl3hHWcZFiX.png">
<meta property="og:image" content="https://s2.loli.net/2024/07/18/T5R7HOtiSdYIKFl.png">
<meta property="og:image" content="https://s2.loli.net/2024/07/18/lRpKxEeHkhTUsr7.png">
<meta property="article:published_time" content="2024-07-18T02:40:47.000Z">
<meta property="article:modified_time" content="2026-01-05T12:41:19.489Z">
<meta property="article:author" content="Hongyi Shen">
<meta property="article:tag" content="PKI, encryption, TLS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2024/07/18/6tMxpNq2OAoFT5a.png">
  
    <link rel="alternate" href="/blog/atom.xml" title="Hongyi's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/blog/css/style.css">

  
    
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Hongyi&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/blog/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://godshy.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-PKI-and-encryption-explained-step-by-step" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2024/07/18/PKI-and-encryption-explained-step-by-step/" class="article-date">
  <time class="dt-published" datetime="2024-07-18T02:40:47.000Z" itemprop="datePublished">2024-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/security/">security</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      PKI and encryption explained step by step
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="PKI-and-data-transfer-encryption-explained"><a href="#PKI-and-data-transfer-encryption-explained" class="headerlink" title="PKI and data transfer encryption explained"></a>PKI and data transfer encryption explained</h1><p>It is import to understand the concept of data layer encryption and security. Let’s understand how it works from scratch. I will explain this by using different scenarios. </p>
<h2 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h2><ol>
<li><a href="#what-we-want-to-achieve">Basic concept</a></li>
<li><a href="#scenario-1-no-encryption">Scenario 1</a></li>
<li><a href="#scenario-2-symmetric-encryption">Scenario 2</a></li>
<li><a href="#scenario-3-asymmetric-encryption">Scenario 3</a></li>
<li><a href="#scenario-4-digital-signature">Scenario 4</a></li>
<li><a href="#summary">Summary</a></li>
</ol>
<h2 id="What-we-want-to-achieve"><a href="#What-we-want-to-achieve" class="headerlink" title="What we want to achieve?"></a>What we want to achieve?</h2><p>It is always import to understand why we need data layer encryption in the first place. Here is some points that we need to consider if we want to protect the data when sending it to remote peers.</p>
<ul>
<li>confidentiality: Only targeted user or device can read and decrypt the data you sent. If attacker want to decrypt your data, they cannot achieve this within the time that this message or data is valid. Confidentiality is achieved by <strong>encryption algorithms</strong>.</li>
<li>integrity: You need to ensure that the data you sent is not alternated by third parties. Receiver can check to see if the data is original and the same as you sent. This is achieved by using <strong>Hash algorithms</strong>.</li>
<li>Source verification: Sender of data can be verified. Not by forged or created by unknown person. This is achieved by <strong>HMAC</strong>, hash message authentication code.</li>
<li>Deniability prevention: Sender of message or data cannot deny the fact that he sent this message. This is achieved by <strong>digital signature</strong>.</li>
</ul>
<p>Next let’s talk about how to encrypt and secure the connection between users.</p>
<h2 id="Scenario-1-no-encryption"><a href="#Scenario-1-no-encryption" class="headerlink" title="Scenario 1: no encryption"></a>Scenario 1: no encryption</h2><p>Imagine A want to send data to B, in which contains sensitive data.<br>In first scenario, A is sending plain text, hackers can easily stole the data by capturing packet. This is, obviously, not safe.<br><img src="https://s2.loli.net/2024/07/18/6tMxpNq2OAoFT5a.png" alt="Scenario 1, A is sending plain text o B."></p>
<h2 id="Scenario-2-symmetric-encryption"><a href="#Scenario-2-symmetric-encryption" class="headerlink" title="Scenario 2: symmetric encryption"></a>Scenario 2: symmetric encryption</h2><p>Let’s consider a encryption method to protect data transportation.<br>There is one method called <strong>symmetric encryption</strong>, data is encrypted and decrypted by a so-called key. In symmetric encryption, both encryption&#x2F;decryption is used by same key. So this doesn’t solve the problem of data leakage. If attackers stole the key, they are also able to see the content of data.<br><img src="https://s2.loli.net/2024/07/18/FSnuHhs178GkKxe.png" alt="Scenario 2, symmetric encryption, but not solving problems"></p>
<h2 id="Scenario-3-asymmetric-encryption"><a href="#Scenario-3-asymmetric-encryption" class="headerlink" title="Scenario 3: asymmetric encryption"></a>Scenario 3: asymmetric encryption</h2><p>To solve the problem in scenario 2, we need to think of a way to protect the key from being stolen while transferring to remote side.<br>Here we introduce <strong>asymmetric encryption algorithm</strong>. Asymmetric encryption use a private&#x2F;public key pair, instead of one key to encrypt and decrypt data. You can either choose to use private key to encrypt and public key to decrypt or vice versa. In our case, A&#x2F;B firstly generate their only private&#x2F;public key-pair. Then encrypt the data using their private key and exchange the public key with others.<br>Data are decrypted by the corresponding public key.</p>
<p>The problem of asymmetric algorithm is that it has a huge compute complexity so using this method to encrypt  large data is time costing.<br>To mitigate the issue, we use asymmetric algorithm to encrypt&#x2F;decrypt the symmetric key only. The data is still encrypted by symmetric key. Then the key itself is encrypted by private key of sender. Receiver received the encrypted symmetric key and the public key of sender, it uses the public key to decrypt the symmetric key, and use this key to decrypt the data. In this case, even if hacker get the public key, he cannot decrypt the encrypted symmetric key, thus not able to stole the data.<br><img src="https://s2.loli.net/2024/07/18/mQ7xhypnv9uMS4I.png" alt="Scenario 3, by using asymmetric and symmetric encryption, data are now secured"></p>
<p>But hacker doesn’t give up, in fact he still has some way to stole the data. Actually the method of exchanging public keys between each other, will cause source verification issue. That’s what I mentioned in the first place. In other word, neither A nor B can figure out whether he is exchanging keys with proper peer. Hacker could be playing A or B, and we don’t have a way to identify then. Also, we are not sure whether data is not tampered during transportation or not. Let’s look two attack pattern below.</p>
<p>In first pattern, hacker is playing A and exchanging key with B, B actually received public key from hacker, but hacker claims the key is actually from A, B cannot verify it.</p>
<p><img src="https://s2.loli.net/2024/07/18/KvucmGXQnyFtji8.png" alt="Attack pattern 1. Hacker is playing role as A and send malicious data"></p>
<p>In second pattern, hacker is playing B and exchanging key with A. A cannot verify whether the incoming public key is from B or others. By encrypting the data using the unknown public key, it is actually sending data to hacker.<br><img src="https://s2.loli.net/2024/07/18/oITn98uUgYlOft1.png" alt="Attack pattern 2. Hacker is staling data from A by playing role as B"></p>
<h2 id="Scenario-4-digital-signature"><a href="#Scenario-4-digital-signature" class="headerlink" title="Scenario 4: digital signature"></a>Scenario 4: digital signature</h2><p>So how we fix this issue? You see, in real world, we use signature to<br>identify the source of executer. You cannot deny what you have done with signature as evidence. We can use same method to identify the sender in our case, by using method so-called digital signature. To verify the source of sender, sender uses his private key to encrypt the hash of his data, hash of the data is called digest, and encrypted hash is called signature. Sender and receiver exchanges public key, then perform Data encryption and symmetric key encryption, when sender sends his encrypted data and key, he also sends a signature in which contains the hash result of the data encrypted by his private key. Receiver then do the same thing, decrypt data and symmetric key, but also decrypt the signature and compare with the hash between the sent data digest and signature digest.<br><img src="https://s2.loli.net/2024/07/18/kdZbijFreGV7BgI.png" alt="A uses his private key to do digital signature"></p>
<p><img src="https://s2.loli.net/2024/07/18/EHZzMIxsUWX6tuL.png" alt="A send his digital signature to prove the data is sent to B not by others and data is not alternated"></p>
<p>However, still one problem exists.. Since there is no way to verify the identity of key owner, everyone can claim they are the correct sender.. Signature can make sure data is not alternated while transporting. But every can claim that they are A using their own signature. </p>
<p>In real world, every one’s identity is proven by your government or a third party authority that everyone can believe into. Here we introduce a concept called CA (centralized authority) to deal with the identity problem. CA acts as a trusted third-party to help validate and verify the identity of each senders&#x2F;receivers.<br>CA uses his private key to create digest and prepare the certificate for each public key of end user. The certificate has specific format. But in general, it contains public key of the end-user, valid data and digital signature of CA.<br>Certificate is verified by CA’s public key, if the digest matches, then senders’ identity are verified.</p>
<p><img src="https://s2.loli.net/2024/07/18/cKhp8g7CRjeBrLA.png" alt="A here send a CSR(certificate sign request) to CA, CA signs this CSR using its private key. A can now use his signed certificate to identify himself."></p>
<p>However, how to verify CA is trusted? Not signed by anyone else? Actually everyone can setup its own CA and sign for himself. To prevent it, CA will self-sign a root certificate, and install on each users. Users use CA’s public key to verify the identity of CA.<br><img src="https://s2.loli.net/2024/07/18/wnUILl3hHWcZFiX.png" alt="CA also need to be trusted."></p>
<p><img src="https://s2.loli.net/2024/07/18/T5R7HOtiSdYIKFl.png" alt="Generally, CA sign its own public key. And installed on end-users. For example, every PC would install CA cert when it was manufactured. CA cert is decrypted by CA public key"></p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>To establish a secured connection between A and B,<br>in which A’s identity is verified by B and B’s identity is verified by A. On A and B there should be these files existing below.<br><img src="https://s2.loli.net/2024/07/18/lRpKxEeHkhTUsr7.png" alt="A/B need to install CA cert, then they exchange their certificates."></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://godshy.github.io/blog/2024/07/18/PKI-and-encryption-explained-step-by-step/" data-id="cmkjfu8y3000fecurfj50citd" data-title="PKI and encryption explained step by step" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/PKI-encryption-TLS/" rel="tag">PKI, encryption, TLS</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2026/01/05/Deploy-k8s-cluster/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Deploy kubernetes cluster on virtual machine
        
      </div>
    </a>
  
  
    <a href="/blog/2024/02/21/linux-FS-and-pkg/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">linux FS and pkg</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/DIY-and-lab/">DIY and lab</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Learning/">Learning</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/commands/">commands</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/troubleshooting/">troubleshooting</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Cloud-native/" rel="tag">Cloud native</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/K8s/" rel="tag">K8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/PKI-encryption-TLS/" rel="tag">PKI, encryption, TLS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/k8s-helm/" rel="tag">k8s, helm</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/Cloud-native/" style="font-size: 10px;">Cloud native</a> <a href="/blog/tags/K8s/" style="font-size: 20px;">K8s</a> <a href="/blog/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/blog/tags/PKI-encryption-TLS/" style="font-size: 10px;">PKI, encryption, TLS</a> <a href="/blog/tags/k8s-helm/" style="font-size: 15px;">k8s, helm</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2026/01/">January 2026</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2024/02/">February 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/10/">October 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/06/">June 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2026/01/05/deploy-5gc-on-kubernetes/">Deploy-5gc-on-kubernetes</a>
          </li>
        
          <li>
            <a href="/blog/2026/01/05/Deploy-k8s-cluster/">Deploy kubernetes cluster on virtual machine</a>
          </li>
        
          <li>
            <a href="/blog/2024/07/18/PKI-and-encryption-explained-step-by-step/">PKI and encryption explained step by step</a>
          </li>
        
          <li>
            <a href="/blog/2024/02/21/linux-FS-and-pkg/">linux FS and pkg</a>
          </li>
        
          <li>
            <a href="/blog/2023/10/23/Deploy-free5GC-with-k8s-and-helm/">Deploy free5GC with k8s and helm</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2026 Hongyi Shen<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/blog/js/jquery-3.6.4.min.js"></script>



  
<script src="/blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/blog/js/script.js"></script>





  </div>
</body>
</html>